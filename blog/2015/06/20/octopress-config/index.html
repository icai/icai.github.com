
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>octopress configuration - 泛前端开发</title>
	<meta name="author" content="Terry Cai">
	
	<meta name="description" content="Jun 20, 2015 octopress jekyll, octopress Comments Octopress Configuration 前言 假如想省钱，只是写写博客而已。免去服务器麻烦。推荐你用octopress，可以肯定的，没有wordpress 那么多功能。octopress &hellip;">
	<meta name="keywords" content="octopress, install, github">
	
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="泛前端开发" type="application/atom+xml">
	
	<link rel="canonical" href="http://blog.w3cub.com/blog/2015/06/20/octopress-config/">
	<link href="/favicon.png" rel="shortcut icon">
	<script type="text/javascript" src="/assets/application-3479994825c4d70bd2e003caf4dbedd5f39af909dffa28fa73c99fe446d65488.js"></script>
	<link type="text/css" rel="stylesheet" href="/assets/application-788c77df030bbb89888727b35f7878cbb9395e7424287b24e38ae2c7cbaef01f.css">
	

</head>


<body class="blog">
	<div class="container">
		<div class="sidebar">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
		<img src="/assets/images/avatar.jpeg" style="width: 160px;" />
	
</div>
<h1><a href="/">泛前端开发</a></h1>
<p class="subtitle">I am Terry，习惯阅读无注释代码</p>
<nav id="main-nav"><ul class="main">
	<li class=""><a href="/">主页  Blog</a></li>
    <li class=""><a href="/blog/archives">归档  Archives</a></li>
    <li class="inline"><a href="/blog/categories">分类  Categories</a></li>
    <li class="inline" ><a href="/blog/tags">标签  Tags</a></li>
    
    <li><a href="/slides">演讲 talks</a></li>
    
    <li><a href="/about">关于  About</a></li>
</ul>
<ul class="main">
    <li><a href="http://site.w3cub.com/" target="_blank">前端网址导航  Navs</a></li>
    <li><a href="/tools">前端工具箱  Tools</a></li>
</ul></nav>
<nav id="sub-nav">
	<div class="social">
		

		
		<a class="weibo" href="http://weibo.com/328765211" target="_blank" title="Weibo">Weibo</a>
		
		
			<a class="facebook" href="http://www.facebook.com/terry.cai.7921" target="_blank" title="Facebook">Facebook</a>
		
		
		

		

		
			<a class="github" href="https://github.com/icai" target="_blank" title="GitHub">GitHub</a>
		


		
		
		
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" target="_blank" title="RSS">RSS</a>
		



	</div>
</nav>

<section class="aboutme">
  <p class="motto">
    <script>
    var mottos = ["多数人25岁就死了，一直到75岁才埋。——Horus9527 译","人民不应该怕政府，政府才应该怕人民。","天地不仁，以万物为刍狗；圣人不仁，以百姓为刍狗。  ——老子","爱国者的责任就是保护国家不受政府侵犯——托马斯·潘恩","计算机就跟比基尼一样，省去了人们许多的胡思乱想。 ——萨姆·尤因","想了解一个人的个性，那就赋予他权力。 ——林肯","如果你怀疑自己，那么你的立足点确实不稳固了。","在民主和独裁的斗争中，纸上的宪法敌不过独裁者的刺刀。——林语堂","国家是危险的机器 ——华盛顿","冬天已经到来，春天还会远吗？ ——雪莱","工作撵跑三个魔鬼：无聊、堕落和贫穷。","老大哥在看着你。——奥威尔","宗教上最深的误解——认为坏人没有宗教。——尼采","国家是为人而建立，而人不是为国家而生存。——爱因斯坦","肚子大不可怕，可怕的是肚子里没有好东西。——加菲猫","任何有可能出错的事将会出错 ——墨菲定理","管得最少，就是最好的政府。——大卫·梭罗","人人生而平等 ——美国独立宣言","其实人跟树是一样的，越是向往高处的阳光，它的根就越要伸向黑暗的地底。——尼采"];
    document.writeln(mottos[Math.floor(Math.random() * mottos.length)])
    </script>
  </p>
</section>
</header>				
			</div>
		</div>
		<div id="topbar" class="topbar">
			<div class="btn-bar"><i></i></div> 
			<h1><a href="/">泛前端开发</a></h1> 
			<a class="me" href="/about/"><img src="/assets/images/avatar.jpeg" alt="泛前端开发"></a>
		</div>
		<div id="sidebar-mask" style="display: none;"></div>
		<div class="main-col">
			
				
			
			<div class="main-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	


	<div class="meta">
		<div class="date">









<time datetime="2015-06-20T23:16:31+08:00" data-updated="true" itemprop="datePublished">Jun 20, 2015</time></div>
		<div class="cats">


	octopress


</div>
		

<div class="tags">
  
    <a class='tag' href='/blog/tags/jekyll/'>jekyll</a>, <a class='tag' href='/blog/tags/octopress/'>octopress</a>
  
</div>

		
			<span class="comments"><a href="#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name">Octopress Configuration
	
	</h1>
	

	
	<hr />
	<div class="entry-content" itemprop="articleBody"><a name="L......"></a>
<h2>前言</h2>

<p>假如想省钱，只是写写博客而已。免去服务器麻烦。推荐你用octopress，可以肯定的，没有wordpress 那么多功能。octopress 是基于 jekyll 的 静态化博客，可以在github pages 和 gitcafe 等上运行。下面我们来部署一下 我们的<code>A blogging framework for hackers.</code> 博客。</p>

<!--more-->


<hr />

<p>先看一下技术栈：</p>

<p>octopress -> jekyll -> ruby</p>

<p>Markdown (or Textile), Liquid, HTML &amp; CSS go in. Static sites come out ready for deployment.</p>

<p>Liquid 一个 ruby模板引擎，Markdown是……。</p>

<p>所以 安装octopress之前必不可少的是安装Ta的生态环境。</p>

<a name="L......Octopress"></a>
<h2>安装Octopress</h2>

<a name="L......rvm"></a>
<h3>安装rvm</h3>

<p>打开<a href="https://rvm.io/">rvm</a>首页，打开终端，使用以下命令安装吧。</p>

<pre><code>$ gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3

$ \curl -sSL https://get.rvm.io | bash -s stable
</code></pre>

<p><a href="https://en.wikipedia.org/wiki/Ruby_Version_Manager">rvm wiki</a></p>

<a name="L......Ruby"></a>
<h3>安装Ruby</h3>

<pre><code>$ rvm -h
$ rvm list
$ rvm install 2.2.1
$ rvm use 2.2.1
</code></pre>

<p>某些时候会提示，请使用 &ndash;bash-login. 使用就OK了。</p>

<p>安装完成后可以用ruby &ndash;version进行验证</p>

<a name="L......Octopress"></a>
<h3>安装Octopress</h3>

<p>安装Ruby完成后就按照官方指南安装Octpress</p>

<pre><code>#clone octopress
$ git clone git://github.com/imathis/octopress.git octopress
$ cd octopress

##安装依赖
$ gem install bundler
$ bundle install



##安装octopress默认主题
$ rake install
</code></pre>

<hr />

<p>bundle 命令 是 Gemfile 文件用的，和 nodejs 项目的 package.json 类似，都是一键安装依赖包文件。</p>

<a name="L......"></a>
<h2>部署</h2>

<p>接下来需要把Blog部署到github上去，第一步要做的是去<a href="https://github.com/new">github</a>创建一个<code>username.github.io</code>的repo，比如我的就叫<code>icai.github.io</code>。</p>

<p>然后运行以下命令，并依照提示完成github和Octopress的关联</p>

<pre><code>$ rake setup_github_pages
</code></pre>

<hr />

<a name="L............"></a>
<h2>创建博客</h2>

<a name="L............"></a>
<h3>生成博客</h3>

<pre><code>$ rake generate
$ rake deploy
</code></pre>

<p>rake 命令 是 Rakefile 文件用的，你在带有Rakefile 目录下执行 rake 命令，
当然你可以 <code>rake -T</code> 查看当前所有的rake Task， 或者 rake -h 获取帮助</p>

<p>把生成后的代码上传到github</p>

<pre><code>$ git add .
$ git commit -m 'create blog'
$ git push origin source
</code></pre>

<p>完成后等待一段时间后就能访问<code>http://username.github.io</code>看到自己的博客了</p>

<a name="L............"></a>
<h3>修改配置</h3>

<p>配置文件路径为<code>~/octopress/_config.yml</code></p>

<p>参考： <a href="https://github.com/octopress/octopress">官方</a></p>

<p>编辑完成后</p>

<pre><code>$ rake generate

$ git add .
$ git commit -m "settings" 
$ git push origin source

$ rake deploy
</code></pre>

<a name="L....................."></a>
<h3>安装第三方主题</h3>

<p>Octopress有许多第三方主题可以选择，首先在<a href="http://opthemes.com/">这里</a>上寻找喜欢的主题，点击进入对应主题的git，一般在readme上都会有安装流程</p>

<pre><code>#这里以安装allenhsu定制的greyshade主题为例，原作者是shashankmehta
$ git clone git@github.com:allenhsu/greyshade.git .themes/greyshade

#Substitue 'color' with your highlight color
$ echo "\$greyshade: color;" &gt;&gt; sass/custom/_colors.scss 

$ rake "install[greyshade]"
$ rake generate

$ git add .
$ git commit -m "theme" 
$ git push origin source

$ rake deploy
</code></pre>

<a name="L.................."></a>
<h3>支持中文标签</h3>

<p>目前版本的Octopress会在<code>/source/blog/categories</code>下创建一个<code>index.markdown</code>来作为分类的首页，但这个首页在标签有中文时会出现无法跳转的情况，原因是因为在出现中文标签时Octopress会把文件的路径中的中文转换成拼音，而在Category跳转时是直接写了中文路径，结果自然是404。解决方法是自己实现一个分类首页并处理中文。</p>

<p>首先按照<a href="https://kaworu.ch/blog/2013/09/23/categories-page-with-octopress/">这里</a>的方法实现<code>index.html</code></p>

<p>将<code>plugins/category_list_tag.rb</code>中的</p>

<pre><code>category_url = File.join(category_dir, category.gsub(/_|\P{Word}/, '-').gsub(/-{2,}/, '-').downcase)
</code></pre>

<p>替换成</p>

<pre><code>category_url = File.join(category_dir, category.to_url.downcase)
</code></pre>

<p>这样你的博客就可以支持中文标签的跳转了。</p>

<hr />

<a name="L........."></a>
<h2>写博客</h2>

<p>经过上面几部后，博客已经成功搭建，现在就可以开始写博文了。</p>

<a name="L............"></a>
<h3>创建博文</h3>

<pre><code>#如果用的是终端
$ rake new_post['title']

#如果用的是ZSH
$ rake "new_post[title]"
#或者
$ rake new_post\['title'\]
</code></pre>

<p>生成的文件在<code>~/source/_posts</code>目录下</p>

<a name="L............"></a>
<h3>编辑博文</h3>

<pre><code>#...markdown写博文

$ rake preview #localhost:4000

$ rake generate

$ git add .
$ git commit -m "comment" 
$ git push origin source

$ rake deploy
</code></pre>

<hr />

<a name="L............"></a>
<h2>参考资料</h2>

<ul>
<li><a href="http://octopress.org/">http://octopress.org/</a></li>
<li><a href="https://msching.github.io/blog/2014/04/11/starting/">https://msching.github.io/blog/2014/04/11/starting/</a></li>
<li><a href="https://github.com/msching/msching.github.io">https://github.com/msching/msching.github.io</a></li>
<li><a href="https://github.com/xiaocong/xiaocong.github.io">https://github.com/xiaocong/xiaocong.github.io</a></li>
<li><a href="https://help.github.com/articles/using-jekyll-plugins-with-github-pages/">https://help.github.com/articles/using-jekyll-plugins-with-github-pages/</a></li>
<li><a href="https://github.com/shashankmehta/greyshade">https://github.com/shashankmehta/greyshade</a></li>
<li><a href="https://github.com/imathis/octopress">https://github.com/imathis/octopress</a></li>
<li><a href="http://blog.devtang.com/blog/2012/02/10/setup-blog-based-on-github/">http://blog.devtang.com/blog/2012/02/10/setup-blog-based-on-github/</a></li>
<li><a href="https://msching.github.io/blog/2014/04/11/starting/">https://msching.github.io/blog/2014/04/11/starting/</a></li>
<li><a href="http://robdodson.me/some-octopress-rake-tips/">http://robdodson.me/some-octopress-rake-tips/</a></li>
<li><a href="http://jekyllcn.com/docs/templates/">http://jekyllcn.com/docs/templates/</a></li>
<li><a href="http://rails-practice.com/content/">http://rails-practice.com/content/</a></li>
</ul>

</div>

	
		<br>
<br>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">Creative Commons BY-NC-ND 3.0</a></br>
	

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style addthis_16x16_style">
	
	<a class="addthis_button_sinaweibo"></a>
	
	
	
	<a class="addthis_button_twitter"></a>
	
	
	
	<a class="addthis_button_compact"></a>
	<a class="addthis_counter addthis_bubble_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-558841b45b591663"></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner">Powered by <a href="https://jekyllrb.com/">Jekyll</a>, Hosted by <a href="https://pages.github.com">Github Pages</a>, <a href="https://github.com">GitHub</a>.
<br>Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a>. <a href="https://github.com/icai/icai.github.io/tree/source" target="_blank">Source Code</a></br>
Copyright &copy; 2017

    Terry Cai

</br></footer>
			


<script type="text/javascript">
      var disqus_shortname = 'w3cub';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://blog.w3cub.com/blog/2015/06/20/octopress-config/';
        var disqus_url = 'http://blog.w3cub.com/blog/2015/06/20/octopress-config/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-64597109-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



		</div>
	</div>
</body>
</html>
